<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Weather Ultimate Pro</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;800;900&display=swap" rel="stylesheet">
    <style>
        /* ========================================
           CSS –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò
           ========================================
        */
        :root {
            --bg-dark: #020617;
            --bg-gradient: radial-gradient(circle at 50% 0%, #1e293b 0%, #020617 80%);
            --card-bg: rgba(15, 23, 42, 0.75);
            --card-border: 1px solid rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #94a3b8;
            --accent: #38bdf8;
            --font-main: 'Inter', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: var(--bg-dark);
            background-image: var(--bg-gradient);
            color: var(--text-main);
            font-family: var(--font-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            overflow-x: hidden;
        }

        #star-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .wrapper {
            width: 100%;
            max-width: 520px;
            padding: 20px;
            z-index: 10;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* ========================================
           –ì–õ–ê–í–ù–´–ô –≠–ö–†–ê–ù (HERO SECTION)
           ========================================
        */
        .hero {
            text-align: center;
            padding-top: 40px;
            padding-bottom: 10px;
        }

        .city-label {
            font-size: 1rem;
            font-weight: 900;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: var(--text-muted);
            margin-bottom: 15px;
        }

        .temp-display {
            position: relative;
            display: inline-block;
        }

        .temp-val {
            font-size: 10rem;
            font-weight: 900;
            line-height: 0.85;
            letter-spacing: -6px;
            text-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .temp-val::after {
            content: "¬∞";
            position: absolute;
            top: 10px;
            right: -45px;
            font-size: 6rem;
            font-weight: 400;
        }

        .status-text {
            font-size: 1.4rem;
            font-weight: 900;
            text-transform: uppercase;
            margin-top: 25px;
            letter-spacing: 1px;
        }

        /* ========================================
           –ü–û–ß–ê–°–û–í–û–ô –°–ö–†–û–õ–õ
           ========================================
        */
        .hourly-wrap {
            display: flex;
            gap: 12px;
            overflow-x: auto;
            padding-bottom: 10px;
            scrollbar-width: none;
        }

        .hourly-wrap::-webkit-scrollbar {
            display: none;
        }

        .h-card {
            min-width: 90px;
            background: var(--card-bg);
            border: var(--card-border);
            border-radius: 26px;
            padding: 22px 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            backdrop-filter: blur(20px);
        }

        .h-time { font-size: 0.8rem; font-weight: 900; color: var(--text-muted); text-transform: uppercase; }
        .h-icon { font-size: 2rem; }
        .h-temp { font-size: 1.6rem; font-weight: 900; }

        /* ========================================
           –°–ï–¢–ö–ê –í–ò–î–ñ–ï–¢–û–í
           ========================================
        */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .widget {
            background: var(--card-bg);
            border: var(--card-border);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 24px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            overflow: hidden;
        }

        .w-sq { aspect-ratio: 1 / 1; }
        .w-full { grid-column: span 2; min-height: 140px; }

        .w-head {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8rem;
            font-weight: 900;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 1.5px;
        }

        .w-body {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .w-big-val {
            font-size: 3.5rem;
            font-weight: 900;
            line-height: 1;
        }

        .w-unit {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-muted);
            margin-left: 6px;
        }

        /* –í–∏–¥–∂–µ—Ç –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ */
        .hum-box { position: relative; width: 100px; height: 100px; }
        .hum-svg { transform: rotate(-90deg); width: 100%; height: 100%; }
        .hum-bg { fill: none; stroke: rgba(255,255,255,0.05); stroke-width: 8; }
        .hum-fill {
            fill: none; stroke: var(--accent); stroke-width: 8;
            stroke-linecap: round; transition: stroke-dashoffset 1s ease;
        }
        .hum-center {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 1.5rem; font-weight: 900;
        }
        .dew-label {
            text-align: center; font-size: 0.8rem; font-weight: 900;
            color: var(--accent); text-transform: uppercase; margin-top: 10px;
        }

        /* –í–µ—Ç–µ—Ä */
        .wind-ring {
            width: 85px; height: 85px;
            border: 2px dashed rgba(255,255,255,0.1);
            border-radius: 50%;
            position: relative;
        }
        .n-mark {
            position: absolute; top: -12px; left: 50%; transform: translateX(-50%);
            font-size: 10px; font-weight: 900; color: var(--text-muted);
        }
        .wind-arrow-wrap {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            transition: 1s ease;
        }

        /* ========================================
           –ü–†–û–ì–ù–û–ó (–°–ü–ò–°–û–ö)
           ========================================
        */
        .forecast-card {
            background: var(--card-bg);
            border: var(--card-border);
            backdrop-filter: blur(20px);
            border-radius: 32px;
            padding: 28px;
        }

        .f-table-head {
            display: grid;
            grid-template-columns: 1.5fr 1fr 1fr;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 0.8rem;
            font-weight: 900;
            color: var(--text-muted);
            text-transform: uppercase;
            text-align: center;
        }

        .f-row {
            display: grid;
            grid-template-columns: 1.5fr 1fr 1fr;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            text-align: center;
        }
        .f-row:last-child { border-bottom: none; }

        .f-main-info { display: flex; align-items: center; gap: 15px; text-align: left; }
        .f-day-name { font-weight: 900; font-size: 1rem; text-transform: uppercase; }
        .f-date-sub { font-size: 0.75rem; color: var(--text-muted); font-weight: 700; }
        .f-temp-d { font-size: 1.4rem; font-weight: 900; color: #fff; }
        .f-temp-n { font-size: 1.4rem; font-weight: 900; color: var(--text-muted); }

    </style>
</head>
<body>

    <canvas id="star-canvas"></canvas>

    <div class="wrapper">
        <header class="hero">
            <div class="city-label">–∑–∞–û–∫–Ω–æ–º ‚Ä¢ –ö—É—Ä–≥–∞–Ω</div>
            <div class="temp-display">
                <div class="temp-val" id="main-t">--</div>
            </div>
            <div class="status-text" id="status-t">–ó–ê–ì–†–£–ó–ö–ê –î–ê–ù–ù–´–•...</div>
        </header>

        <div class="hourly-wrap" id="h-list"></div>

        <div class="grid">
            <div class="widget w-sq">
                <div class="w-head">üß≠ –í–ï–¢–ï–†</div>
                <div class="w-body">
                    <div class="wind-ring">
                        <span class="n-mark">–°</span>
                        <div class="wind-arrow-wrap" id="w-arrow">
                            <svg width="30" viewBox="0 0 24 24" fill="white" style="filter: drop-shadow(0 0 8px var(--accent))">
                                <path d="M12 2L4.5 20.29l.71.71L12 18l6.79 3 .71-.71z"/>
                            </svg>
                        </div>
                    </div>
                </div>
                <div>
                    <span class="w-big-val" id="w-speed">0</span><span class="w-unit">–º/—Å</span>
                </div>
            </div>

            <div class="widget w-sq">
                <div class="w-head">üíß –í–õ–ê–ñ–ù–û–°–¢–¨</div>
                <div class="w-body">
                    <div class="hum-box">
                        <svg class="hum-svg" viewBox="0 0 100 100">
                            <circle class="hum-bg" cx="50" cy="50" r="44"/>
                            <circle id="hum-circle" class="hum-fill" cx="50" cy="50" r="44" stroke-dasharray="276" stroke-dashoffset="276"/>
                        </svg>
                        <div class="hum-center" id="hum-t">0%</div>
                    </div>
                </div>
                <div class="dew-label">–¢–û–ß–ö–ê –†–û–°–´ <span id="dew-t">0</span>¬∞</div>
            </div>

            <div class="widget w-full">
                <div class="w-head">‚è≤Ô∏è –ë–ê–†–û–ú–ï–¢–†</div>
                <div class="w-body" style="justify-content: flex-start;">
                    <span class="w-big-val" id="pres-t">0</span>
                    <span class="w-unit" style="margin-top: 15px;">–º–º —Ä—Ç. —Å—Ç.</span>
                </div>
            </div>
        </div>

        <div class="forecast-card">
            <div class="w-head" style="margin-bottom: 25px;">üìÖ –ü–†–û–ì–ù–û–ó –ù–ê 14 –î–ù–ï–ô</div>
            <div class="f-table-head">
                <div style="text-align: left;">–î–ê–¢–ê</div>
                <div>–î–ï–ù–¨</div>
                <div>–ù–û–ß–¨</div>
            </div>
            <div id="f-list"></div>
        </div>
    </div>

    <script>
        const API_URL = "https://api.open-meteo.com/v1/forecast?latitude=55.44&longitude=65.34&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,pressure_msl,wind_speed_10m,wind_direction_10m,dew_point_2m&hourly=temperature_2m,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset&timezone=auto&forecast_days=14&wind_speed_unit=ms";

        const ICONS = {
            0: '‚òÄÔ∏è', 1: 'üå§Ô∏è', 2: '‚õÖ', 3: '‚òÅÔ∏è', 45: 'üå´Ô∏è', 51: 'üå¶Ô∏è', 61: 'üåßÔ∏è', 71: 'üå®Ô∏è', 95: '‚õàÔ∏è'
        };

        async function loadWeather() {
            try {
                const res = await fetch(API);
                const data = await res.json();

                // Hero
                document.getElementById('main-t').innerText = Math.round(data.current.temperature_2m);
                document.getElementById('status-t').innerText = `–û–©–£–©–ê–ï–¢–°–Ø –ö–ê–ö ${Math.round(data.current.apparent_temperature)}¬∞`;

                // Wind
                document.getElementById('w-speed').innerText = Math.round(data.current.wind_speed_10m);
                document.getElementById('w-arrow').style.transform = `rotate(${data.current.wind_direction_10m}deg)`;

                // Humidity
                const hum = data.current.relative_humidity_2m;
                document.getElementById('hum-t').innerText = hum + '%';
                document.getElementById('hum-circle').style.strokeDashoffset = 276 - (276 * hum / 100);
                document.getElementById('dew-t').innerText = Math.round(data.current.dew_point_2m);

                // Pressure
                document.getElementById('pres-t').innerText = Math.round(data.current.pressure_msl * 0.750062);

                // Hourly
                const hBox = document.getElementById('h-list');
                hBox.innerHTML = '';
                for(let i=0; i<24; i++) {
                    const t = new Date(data.hourly.time[i]).getHours();
                    hBox.innerHTML += `
                        <div class="h-card">
                            <div class="h-time">${i===0?'–°–ï–ô–ß–ê–°':t+':00'}</div>
                            <div class="h-icon">${ICONS[data.hourly.weather_code[i]] || '‚òÅÔ∏è'}</div>
                            <div class="h-temp">${Math.round(data.hourly.temperature_2m[i])}¬∞</div>
                        </div>
                    `;
                }

                // Daily
                const fBox = document.getElementById('f-list');
                fBox.innerHTML = '';
                data.daily.time.forEach((d, i) => {
                    const date = new Date(d);
                    fBox.innerHTML += `
                        <div class="f-row">
                            <div class="f-main-info">
                                <span style="font-size: 1.8rem;">${ICONS[data.daily.weather_code[i]] || '‚òÅÔ∏è'}</span>
                                <div>
                                    <div class="f-day-name">${i===0?'–°–ï–ì–û–î–ù–Ø':date.toLocaleDateString('ru-RU',{weekday:'short'})}</div>
                                    <div class="f-date-sub">${date.toLocaleDateString('ru-RU',{day:'numeric',month:'short'})}</div>
                                </div>
                            </div>
                            <div class="f-temp-d">${Math.round(data.daily.temperature_2m_max[i])}¬∞</div>
                            <div class="f-temp-n">${Math.round(data.daily.temperature_2m_min[i])}¬∞</div>
                        </div>
                    `;
                });

            } catch (e) { console.error("API Error", e); }
        }

        function stars() {
            const c = document.getElementById('star-canvas'), ctx = c.getContext('2d');
            let w, h, s = [];
            const init = () => {
                w = c.width = window.innerWidth; h = c.height = window.innerHeight;
                s = Array.from({length: 150}, () => ({x: Math.random()*w, y: Math.random()*h, r: Math.random()*1.5, o: Math.random(), v: Math.random()*0.02}));
            };
            const draw = () => {
                ctx.clearRect(0,0,w,h);
                s.forEach(p => {
                    ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
                    ctx.fillStyle = `rgba(255,255,255,${p.o})`; ctx.fill();
                    p.o += p.v; if(p.o>1 || p.o<0.2) p.v *= -1;
                });
                requestAnimationFrame(draw);
            };
            window.onresize = init; init(); draw();
        }

        stars();
        loadWeather();
        setInterval(loadWeather, 600000);
    </script>
</body>
</html>

